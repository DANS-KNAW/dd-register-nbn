#
# dd-register-nbn configuration file
#
server:
  applicationContextPath: /
  adminContextPath: /
  applicationConnectors:
    - type: http
      port: 20380
  adminConnectors:
    - type: http
      port: 20381
  # Logs the requests to the Jetty http server
  requestLog:
    appenders:
      - type: file
        archive: false
        timeZone: system
        currentLogFilename: /var/opt/dans.knaw.nl/log/dd-register-nbn/request.log

nbnRegistration:
  inbox:
    path: /var/opt/dans.knaw.nl/tmp/dd-register-nbn/inbox
    pollingInterval: 500ms
  outbox:
    processed: /var/opt/dans.knaw.nl/tmp/dd-register-nbn/processed
    failed: /var/opt/dans.knaw.nl/tmp/dd-register-nbn/failed
  gmh:
    url: # Fill in a valid GMH server URL
    token: # Fill in a valid token, generated via the token endpoint of the GMH server
    httpClient:
      timeout: 30s
      connectionTimeout: 15s
      timeToLive: 1h
      retries: 2
      # The GMH server does not handle GZIP compression
      gzipEnabled: false
      userAgent: dd-register-nbn


#
# See https://www.dropwizard.io/en/latest/manual/configuration.html#logging
#
logging:
  level: INFO
  appenders:
    - type: file
      archive: false
      timeZone: system
      currentLogFilename: /var/opt/dans.knaw.nl/log/dd-register-nbn/dd-register-nbn.log
    - type:  console
      # Used in combination with journald, which already adds the timestamp
      logFormat: "%-5p %c{0}: %m%n%dwREx"
  loggers:
      'org.hibernate.engine.internal.StatisticalLoggingSessionEventListener': 'OFF'
